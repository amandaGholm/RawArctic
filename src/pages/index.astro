---
import BaseLayout from "../layouts/BaseLayout.astro";
import Button from "../components/Button.astro";
import { Image } from "astro:assets";
import gronland from "../assets/images/iconGrønland.svg";
import guides from "../assets/images/iconGuides.svg";
import telt from "../assets/images/iconTelt.svg";
import SectionCTA from "../components/SectionCTA.astro";
import ScrollArrow from "../components/ScrollArrow.astro";
import Malik from "../assets/images/Malik.jpg";
import TurenSlider from "../components/TurenSlider.astro";
---

<BaseLayout>
  <!-- Hero -->
  <div class="hero-content-video">
    <video autoplay loop muted playsinline class="hero-video">
      <source src="/video/heroVideo.mp4" />
    </video>

    <div class="hero-content appear">
      <h1>Fluefisk på unikke Grønland</h1>
      <p class="titelLight heroTitel">
        Uovertruffet fluefiskeri og nærvær i naturen
      </p>
      <div class="CTAer">
        <Button
          class="knap"
          href="/kontakt/"
          label="Tag med os"
          style="primary"
        />
        <Button
          class="knap"
          href="/campqussuk/"
          label="Læs mere om turen"
          style="secondary"
        />
      </div>
    </div>
  </div>
  <div class="emptyContainer"><ScrollArrow /></div>
  <!-- ------------------------------- -->

  <!-- Om Raw Arctic -->
  <section class="max-width">
    <div class="RA-sekction" id="RA">
      <h2 class="blue RA-h2">Hvem er RawArctic?</h2>
      <div class="RA-content-button">
        <div class="RA-content">
          <div class="RA-card verticalAppear">
            <Image src={gronland} alt="ikon af grønland" class="RA-billede" />
            <div class="RA-text">
              <h3 class="titelDark">Lokal og autentisk natur</h3>
            </div>
          </div>
          <div class="RA-card verticalAppear">
            <Image
              src={guides}
              alt="ikon af 2 personer som giver higfive"
              class="RA-billede"
            />
            <div class="RA-text">
              <h3 class="titelDark">Samarbejde med grønlandske guides</h3>
            </div>
          </div>
          <div class="RA-card verticalAppear">
            <Image
              src={telt}
              alt="ikon af et glampingtelt"
              class="RA-billede"
            />
            <div class="RA-text">
              <h3 class="titelDark">Eksklusiv indkvartering og gastronomi</h3>
            </div>
          </div>
        </div>
        <div>
          <Button
            class="knap"
            href="/omarcticflyfishing/"
            label="Læs mere om Arctic Flyfishing"
            style="secondary"
          />
        </div>
      </div>
    </div>
  </section>
  <!-- ----------- -->

  <!-- Om turen -->
  <section class="TUR-section">
    <div class="TUR-content">
      <h2 class="blue">Oplev komfort i vildmarken</h2>
      <p class="bodyDark TUR-text">
        Nyd en uforglemmelig uge langs Grønlands elve og overnat under bekvemme
        forhold
      </p>
      <div>
        <Button
          class="knap"
          heref="/"
          label="Læs mere om turen"
          style="secondary"
        />
      </div>
    </div>
    <video autoplay loop muted class="TUR-video">
      <source src="/video/vandfald1.mp4" />
    </video>
  </section>
  <!-- -------------- -->

  <!-- Webfeatur -->
  <section class="WEB-section">
    <Image
      src={Malik}
      alt="Her skal der stå en alt tekst"
      class="WEB-billede"
    />
    <div class="WEB-content">
      <h2 class="WEB-h2 white">
        Fra trawl til flue: Malik deler i dag ud af sin passion
      </h2>
      <p class="bodyLight WEB-text">
        Malik, der opvoksede med fiskeri på Grønland, skippede uddannelsen for
        at arbejde på en fisketrawler. Arctic Flyfishing blev stedet, hvor han
        fandt formål og personlig udvikling, hvilket illustrerer, hvordan lokal
        arbejdskraft bidrager til at styrke både samfundet og virksomheden.
      </p>
      <div>
        <Button
          class="knap"
          href="/ommalik/"
          label="Læs historien"
          style="secondary"
        />
      </div>
    </div>
  </section>

  <SectionCTA />
  <TurenSlider />
</BaseLayout>

<script>
  import { gsap } from "gsap/dist/gsap";
  import { ScrollTrigger } from "gsap/dist/ScrollTrigger";
  gsap.registerPlugin(ScrollTrigger);

  /* Hero */
  gsap.to(".hero-video", {
    duration: 1,
    scrollTrigger: {
      trigger: ".hero-video",
      start: "top top",
      end: "+=700",
      pin: true,
      // markers: true,
    },
  });
  /* --------- */

  /* Animation */
  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      console.log(entry);
      if (entry.isIntersecting) {
        entry.target.classList.add("show");
      } else {
        entry.target.classList.remove("show");
      }
    });
  });
  const hiddenElements = document.querySelectorAll(
    ".hidden , .hidden2, .verticalAppear"
  );
  hiddenElements.forEach((el) => observer.observe(el));
  /* -------------- */
</script>

<style>
  /* Webfeatur */
  .WEB-billede,
  .WEB-content {
    grid-area: 1/1;
  }
  .WEB-content {
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    gap: var(--RA-size-16);
    padding: var(--RA-size-56);
    z-index: 2;
  }

  .WEB-billede {
    height: auto;
    object-fit: cover;
    width: 100%;
    height: 85vh;
    z-index: 1;
  }
  .WEB-text {
    color: var(--RA-blue25);
    max-width: 64ch;
  }
  .WEB-section {
    display: grid;
  }
  .WEB-h2 {
    max-width: 25ch;
  }

  /* ---------- */

  /* TUR sektion */

  .TUR-section {
    display: grid;
    grid-template-columns: 1fr 1fr;
    align-items: center;
    justify-items: center;
  }
  .TUR-video {
    height: auto;
    max-width: 100%;
    display: block;
    max-height: 800px;
  }

  .TUR-content {
    display: flex;
    flex-direction: column;
    justify-content: center;
    max-width: 450px;
    padding: var(--RA-size-56);
    gap: var(--RA-size-16);
  }

  /* Om RawArctic section */
  .RA-h2 {
    padding-left: var(--RA-size-56);
  }
  .RA-billede {
    padding-bottom: var(--RA-size-32);
    height: auto;
    max-width: 100%;
  }
  .RA-text {
    padding-top: var(--RA-size-16);
    max-width: 400px;
    text-align: center;
  }
  .RA-card {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .RA-content {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
  }
  .RA-content-button {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--RA-size-32);
  }
  .RA-sekction {
    margin: 130px 0 130px 0;
    display: flex;
    flex-direction: column;
    gap: var(--RA-size-56);
  }
  /* ------------- */

  /* Max-width */

  /* Hero */
  .hero-video {
    position: absolute;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  .heroTitel {
    padding-top: var(--RA-size-24);
  }
  .hero-content {
    display: flex;
    flex-direction: column;
    padding: 250px var(--RA-size-56);
    z-index: 3;
  }
  .hero-content-video {
    position: relative;
    display: flex;
    height: 100vh;
  }
  .CTAer {
    display: flex;
    padding-top: var(--RA-size-48);
    gap: var(--RA-size-24);
  }
  .emptyContainer {
    height: 100vh;
    display: flex;
    justify-content: center;
    transform: translateY(-15%);
  }
  /* ------------------ */

  @media (max-width: 800px) {
    /* Hero */
    .hero-content {
      display: flex;
      flex-direction: column;
      padding: 250px 0 250px var(--RA-size-24);
      z-index: 2;
    }

    .emptyContainer {
      height: 100vh;
      display: flex;
      justify-content: center;
      transform: translateY(-5%);
    }

    .CTAer {
      display: flex;
      padding-top: var(--RA-size-48);
      gap: var(--RA-size-8);
    }
    /* ------------ */

    /* Om RawArctic section */
    .RA-content {
      display: grid;
      grid-template-columns: 1fr;
    }
    .RA-billede {
      padding-bottom: var(--size-32);
    }
    .RA-sekction {
      margin: 32px 0 32px 0;
    }
    .RA-text {
      padding: var(--RA-size-24);
    }
    .RA-h2 {
      padding-left: var(--RA-size-24);
    }
    /* ------------- */

    /* Turen  */
    .TUR-section {
      display: grid;
      grid-template-columns: 1fr;
      align-items: center;
    }
    .TUR-content {
      padding: var(--RA-size-24);
    }
    .TUR-video {
      order: -1;
    }
    /* ------------- */
    .WEB-billede {
      aspect-ratio: 4/5;
      object-fit: cover;
    }

    .WEB-content {
      padding: var(--RA-size-56) var(--RA-size-24);
    }

    @media (max-width: 400px) {
      .WEB-billede {
        aspect-ratio: 9/16;
      }
    }
  }
</style>
